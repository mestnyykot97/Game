import("./style.scss");const app=document.querySelector(".app");function renderStartBlock(e){const t=document.createElement("div");t.classList.add("game");const n=document.createElement("div");n.classList.add("game__card");const c=document.createElement("div");c.classList.add("game__card-content");const a=document.createElement("h3");a.classList.add("game__title"),a.textContent="Выбери сложность";const d=document.createElement("div");d.classList.add("game__button");const o=document.createElement("button");o.classList.add("button"),o.textContent="1";const l=document.createElement("button");l.classList.add("button"),l.textContent="2";const s=document.createElement("button");s.classList.add("button"),s.textContent="3";const i=document.createElement("div");i.classList.add("game__btn");const r=document.createElement("button");r.classList.add("game__btn-start"),r.textContent="Старт",e.appendChild(t),t.appendChild(n),n.appendChild(c),c.appendChild(a),c.appendChild(d),d.appendChild(o),d.appendChild(l),d.appendChild(s),c.appendChild(i),i.appendChild(r);const p=document.querySelector(".game__btn-start");document.querySelectorAll(".button").forEach((e=>{e.addEventListener("click",(function(e){const t=e.target.textContent;console.log(t),window.application.level=t}))})),p.addEventListener("click",(()=>{window.application.renderScreen("gameField");const e=window.application.level;console.log(e),"1"===e?numberOfCards=3:"2"===e?numberOfCards=6:"3"===e?numberOfCards=9:console.log("Что-то пошло не так")}))}function renderStartScreen(){const e=document.createElement("div");app.appendChild(e),window.application.renderBlock("start",e)}function renderGameFieldBlock(e){const t=document.createElement("div");let n,c;function a(){return c=Math.floor(1+36*Math.random()),c}t.classList.add("cards"),"1"===window.application.level?n=3:"2"===window.application.level?n=6:"3"===window.application.level&&(n=9);const d=[];for(let e=0;e<n;e++)a(),d.includes(c)?(a(),d.push(c)):d.push(c);d.push(...d),console.log(d),d.sort((()=>Math.random()-.5)),console.log(d);for(let c=0;c<d.length;c++){const a=document.createElement("div");a.classList.add("cards__image"),3===n?a.classList.add("card3"):6===n?a.classList.add("card6"):9===n&&a.classList.add("card9"),e.appendChild(t),t.appendChild(a);const o=document.createElement("img");o.src="./img/picture/"+d[c]+".jpg",o.classList.add("front-face");const l=document.createElement("img");l.src="./img/cardFacedown.jpg",l.classList.add("back-face"),a.appendChild(o),a.appendChild(l);const s=document.querySelectorAll(".cards__image");let i=!1;const r=()=>{a.classList.add("flip"),i=!i};s.forEach((e=>{setTimeout((()=>r()),300),setTimeout((()=>{a.classList.remove("flip")}),5e3)}))}const o=document.querySelectorAll(".cards__image");let l=!1;const s=e=>{let t,n;const c=e.target.parentElement;console.log(c),c.classList.add("flip"),l?(l=!1,n=c):(l=!0,t=c)};o.forEach((e=>e.addEventListener("click",s)));const i=document.querySelectorAll(".cards__image");let r=[],p=0;i.forEach((e=>{e.addEventListener("click",(function(){e.children.length>1&&(e.removeChild(e.lastElementChild),r.push(e.firstElementChild),console.log(r),console.log(e.firstElementChild.attributes.src.nodeValue),r.length>=2&&(r[0].attributes.src.nodeValue===r[1].attributes.src.nodeValue?(console.log("Вы выиграли"),r=[],console.log(r),i.forEach((e=>{if(1===e.children.length){console.log(e.children.length),p+=1,console.log(p);const t=4*n;console.log(t),p===t&&console.log("Вы выиграли")}}))):console.log("Вы проиграли")))}))}))}function renderHeaderBlock(e){const t=document.createElement("header");e.appendChild(t);const n=document.createElement("div");n.classList.add("time-pad"),t.appendChild(n);const c=document.createElement("div");c.classList.add("timer"),n.appendChild(c);const a=document.createElement("div");a.classList.add("timer__world"),c.appendChild(a);const d=document.createElement("span");d.classList.add("unit-time"),d.textContent="min",a.appendChild(d);const o=document.createElement("span");d.classList.add("unit-time"),d.textContent="sec",a.appendChild(o);const l=document.createElement("span");l.classList.add("number"),l.textContent="00.00",c.appendChild(l);const s=document.createElement("button");s.classList.add("game__btn-start"),s.classList.add("btn"),s.textContent="Начать заново",n.appendChild(s)}function renderGameFieldScreen(){const e=document.createElement("div");app.appendChild(e),window.application.renderBlock("header",e),window.application.renderBlock("gameField",e)}window.application={blocks:{},screens:{},level:null,cards:null,renderScreen:function(e){window.application.timers.forEach((e=>{clearInterval(e)})),window.application.screens[e]?(app.innerHTML="",window.application.screens[e]()):console.warn("Такой страницы нет")},renderBlock:function(e,t){window.application.blocks[e]?window.application.blocks[e](t):console.warn("Такого блока нет")},timers:[]},window.application.blocks.start=renderStartBlock,window.application.screens.start=renderStartScreen,window.application.renderScreen("start"),window.application.blocks.gameField=renderGameFieldBlock,window.application.blocks.header=renderHeaderBlock,window.application.screens.gameField=renderGameFieldScreen;